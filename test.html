<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #f9f9f9;
    }
    .container {
      text-align: center;
      border: 2px solid #ddd;
      border-radius: 10px;
      padding: 30px;
      background-color: #fff;
      width: 80%;
      max-width: 600px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    .category {
      font-size: 1rem;
      text-align: left;
      margin-bottom: 10px;
    }
    img {
      max-width: 100%;
      border-radius: 10px;
    }
    .btn-container {
      margin-top: 20px;
      display: flex;
      justify-content: space-between;
    }
    .btn {
      background-color: #ffd700;
      border: none;
      border-radius: 5px;
      padding: 10px 20px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .btn:hover {
      background-color: #ffc107;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="category" id="category"></div>
    <img id="test-image" src="https://via.placeholder.com/600x400" alt="Test Image">
    <div class="btn-container">
      <button class="btn" onclick="selectAnswer('real')">Real</button>
      <button class="btn" onclick="selectAnswer('fake')">Fake</button>
    </div>
    <p id="feedback"></p>
  </div>

  <script>
    const categories = ['Cats', 'Frogs', 'Cars'];
    const images = {
      Cats: ['cat1.jpeg', 'cat2.jpeg', 'cat3.jpg', 'cat4.jpg', 'cat5.jpg'],
      Frogs: ['frog1.jpg', 'frog2.jpg', 'frog3.jpg', 'frog4.jpg', 'frog5.jpg'],
      Cars: ['car1.jpg', 'car2.jpg', 'car3.jpg', 'car4.jpg', 'car5.jpg']
    };

    const correctAnswers = {
      Cats: [true, true, true, true, true],
      Frogs: [true, true, true, true, true],
      Cars: [true, true, true, true, true]
    };

    let categoryIndex = 0;
    let imageIndex = 0;
    let results = []; // Array to store the results

    function loadCategory() {
      document.getElementById('category').textContent = `Category: ${categories[categoryIndex]}`;
      document.getElementById('test-image').src = images[categories[categoryIndex]][imageIndex];
    }

    function selectAnswer(answer) {
      const currentCategory = categories[categoryIndex];
      const isCorrect = correctAnswers[currentCategory][imageIndex] === (answer === 'real');
      results.push({
        category: currentCategory,
        image: images[currentCategory][imageIndex],
        userAnswer: answer,
        correctAnswer: correctAnswers[currentCategory][imageIndex] ? 'real' : 'fake',
        result: isCorrect ? 1 : 0
      });

      document.getElementById('feedback').textContent = isCorrect ? 'Correct!' : 'Wrong!';
      setTimeout(nextImage, 1000); // Move to the next image after feedback
    }

    function nextImage() {
      if (imageIndex < images[categories[categoryIndex]].length - 1) {
        imageIndex++;
      } else if (categoryIndex < categories.length - 1) {
        categoryIndex++;
        imageIndex = 0;
      } else {
        saveResultsToCSV();
        return;
      }
      document.getElementById('feedback').textContent = ''; // Clear feedback
      loadCategory();
    }

    function saveResultsToCSV() {
      let csvContent = "data:text/csv;charset=utf-8,Category,Image,UserAnswer,CorrectAnswer,Result\n";
      results.forEach(row => {
        csvContent += `${row.category},${row.image},${row.userAnswer},${row.correctAnswer},${row.result}\n`;
      });

      const encodedUri = encodeURI(csvContent);
      const link = document.createElement("a");
      link.setAttribute("href", encodedUri);
      link.setAttribute("download", "test_results.csv");
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      const fs = require('fs')

// Data which will write in a file.
let data = "Hello world."

// Write data in 'Hello.txt' .
fs.writeFile('Hello.txt', data, (err) => {

    // In case of a error throw err.
    if (err) throw err;
})

      alert("Results saved!"); // Inform the user that results are saved
    }

    loadCategory();
  </script>
</body>
</html>
